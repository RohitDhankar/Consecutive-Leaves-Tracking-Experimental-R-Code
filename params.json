{"name":"Consecutive-leaves-tracking-experimental-r-code-","tagline":"Consecutive-Leaves-Tracking  [ Experimental R-Code ]","body":"---\r\nframework: bootstrap\r\noutput: html_document\r\nhighlighter: prettify\r\nhitheme: twitter-bootstrap\r\nmode: selfcontained\r\ngithub:\r\nbranch: gh-pages\r\nuser: RohitDhankar\r\n---\r\n\r\n<h1 style = \"font-size: 72px;line-height: 72px;color: #0b62a4;margin: 20px 0 20px 0;text-shadow: 1px 1px 5px #789;\"> Rohit <a href = \"https://github.com/RohitDhankar\"> GitHub</a></h1>\r\n\r\n\r\n```{r results='asis', error=F, warning=F, message=F, tidy = F}\r\n# HR Department -Consecutive Leaves Problem \r\n# An obs - \"1\" is a Present day and \"0\" is a Leave day \r\n# 500 Employees 1 Qtr Leave Data \r\nd <- read.csv(\"C:/Users/Rohit/Desktop/HR-Cons.Leaves/d.csv\")\r\n# Extracting Emp ID's \r\neID <- as.data.frame(d[,1]) ;colnames(eID)[1] <- \"Emp-ID\"\r\n# Deleting 1st column / variable - Emp ID\r\nd <- as.data.frame(d[2:91])\r\n# Summing all rows using \"apply\" # create an \"integer column vector\" \r\n# cbind with DF \"d\" # Rename new variable / Column as - \"Sum-P\"\r\nd<-cbind(d,as.data.frame(apply(d, 1, sum)))\r\ncolnames(d)[91] <- \"Sum-P\"\r\n# Counting all \"0\" in a Row # create an \"integer column vector\" \r\n# cbind with DF \"d\" # Rename new variable / Column as - \"Sum-L\"\r\nd<-cbind(d,as.data.frame(apply(d==0, 1, sum)))\r\ncolnames(d)[92] <- \"Sum-L\"\r\n# calculate the startZeros  \r\nstartZs<-apply(d,1,function(x)which.min(x==0)-1) \r\n# gives out only \"0\" values as None of our ROWS starts with a ZERO value \r\nstopZs<-apply(d,1,function(x)which.min(rev(x==0))-1)\r\n# gives out only \"0\" values as None of our ROWS ends with a ZERO value \r\n# calculate -longest run of zeros\r\nlongestRun<-apply(d,1,function(x)\r\n  {\r\n  y = rle(x);\r\n  max(y$lengths[y$values==0],0)}) \r\n# extracting MAX value for Longest Run of Value = \"0\" \r\n# take the max of the two values\r\nMax_Zeros<-as.data.frame(pmax(longestRun,startZs+stopZs))\r\nConsWks<-ifelse(Max_Zeros>14,\"Yes\",\"No\") # Converting to Yes / No factor variable for \"Two Consecutive Weeks of Leave\"\r\nd<-cbind(d,as.data.frame(Max_Zeros))\r\nd<-cbind(d,as.data.frame(ConsWks))\r\ncolnames(d)[93] <-\"Max.Zeros\" ; colnames(d)[94] <-\"Cons.Wks\"\r\nd<-cbind(eID,d)\r\n\r\n# Additional Code ---\r\n# ?rle # Help for rle \r\n# m <- rev(rep(6:10, 1:5))\r\n# rle(m)\r\n# \"Run Length Encoding\" - lengths are the - Consecutive number or repetioion fo the value \r\n# the Values are - the numeric \"values\"  which are gettting repeated - are the - Consecutive numbers . \r\n# lengths: int [1:5] 5 4 3 2 1\r\n# values : int [1:5] 10 9 8 7 6\r\n# ?pmax\r\n\r\n\r\n```\r\n```{r,results='asis',echo=FALSE}\r\n\r\n```\r\n\r\n<br/>\r\n## Contact...\r\n- [ email](https://github.com/RohitDhankar)\r\n- [ Github ](https://github.com/RohitDhankar)\r\n- [ LinkedIn ](https://www.linkedin.com/in/rohitdhankar )\r\n- [ Twitter  ](https://twitter.com/DhankarRohit)\r\n\r\n<br/>\r\n## License - GPL - No Copyright (http://www.gnu.org/licenses/licenses.en.html#GPL)\r\n```\r\n\r\n```\r\n[ Rohit Dhankar 2015](https://github.com/RohitDhankar)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}